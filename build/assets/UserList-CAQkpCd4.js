import{J as C,r as i,K as g,j as e,u as v}from"./index-CpoNZy_K.js";import{A as N}from"./AdaptableCard-BrRUUEaN.js";import{A as y}from"./index-DnNRFRxm.js";import{B as A,D as w}from"./DataTable-Dd0ah6Zu.js";import{l as S,m as U,n as T}from"./index-U2oPHaYB.js";import{u as k}from"./useThemeClass-BqZMVik2.js";import{u as B}from"./useQuery-CdU9hP8Y.js";import{d as D}from"./debounce-DPZCkTRe.js";import{I}from"./hoist-non-react-statics.cjs-CSsTDRi9.js";import{a as K}from"./UserService-DxDj2D-e.js";import{B as L}from"./Button-5FPMlk4P.js";import"./index-1G6_mNEt.js";import"./Views-Dk2fMzxD.js";import"./index-DcKY4__E.js";import"./_getPrototype-DwJTGY_5.js";import"./toString-BjSMy3v_.js";function R(l){return C({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(l)}const x={super_admin:{label:"Super Admin",dotClass:"bg-purple-500",textClass:"text-purple-500"},admin:{label:"Admin",dotClass:"bg-blue-500",textClass:"text-blue-500"},user:{label:"User",dotClass:"bg-gray-500",textClass:"text-gray-500"}},$=()=>{var u,p;const l=i.useRef(null),a=g(),[n,h]=i.useState(""),[o,c]=i.useState({page:1,limit:10}),{data:t,isLoading:f,error:d}=B({queryKey:["users",o,n],queryFn:()=>K({page:o.page,limit:o.limit,search:n})}),j=i.useMemo(()=>D(s=>{h(s),c(r=>({...r,page:1}))},500),[]),b=i.useMemo(()=>[{header:"Username",accessorKey:"username",cell:s=>e.jsxs("div",{className:"flex items-center",children:[e.jsx(y,{icon:e.jsx(R,{}),alt:s.row.original.username}),e.jsx("span",{className:"ml-2 font-semibold",children:s.row.original.username})]})},{header:"Role",accessorKey:"role",cell:s=>{const r=s.row.original.role,m=x[r]||x.user;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:m.dotClass}),e.jsx("span",{className:`font-semibold ${m.textClass}`,children:m.label})]})}},{header:"Created At",accessorKey:"createdAt",cell:s=>e.jsx("span",{children:new Date(s.row.original.createdAt).toLocaleDateString()})},{header:"Actions",id:"action",cell:s=>{const{textTheme:r}=k();return e.jsxs("div",{className:"flex justify-end text-lg",children:[e.jsx("span",{className:`cursor-pointer p-2 hover:${r}`,onClick:()=>a(`/users/view/${s.row.original._id}`),children:e.jsx(S,{})}),e.jsx("span",{className:`cursor-pointer p-2 hover:${r}`,onClick:()=>a(`/users/edit/${s.row.original._id}`),children:e.jsx(U,{})})]})}}],[a]);return d?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("span",{className:"text-red-500",children:["Error: ",d.message]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4",children:e.jsx(I,{placeholder:"Search users...",onChange:s=>j(s.target.value),className:"max-w-md"})}),e.jsx(w,{ref:l,columns:b,data:((u=t==null?void 0:t.data)==null?void 0:u.data)||[],loading:f,pagingData:{total:((p=t==null?void 0:t.data)==null?void 0:p.total)||0,pageIndex:o.page,pageSize:o.limit},onPaginationChange:s=>c(r=>({...r,page:s})),onSelectChange:s=>c({page:1,limit:s})})]})},E=()=>{const l=g(),{user:a}=v(n=>n.auth);return(a==null?void 0:a.role)==="super_admin"||(a==null||a.role),e.jsx(L,{size:"sm",variant:"solid",icon:e.jsx(T,{}),onClick:()=>l("/users/create"),children:"Add User"})},ee=()=>e.jsxs(N,{className:"h-full",bodyClass:"h-full",children:[e.jsxs("div",{className:"lg:flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"mb-4 lg:mb-0",children:"Users"}),e.jsx(E,{})]}),e.jsx($,{})]});export{ee as default};
