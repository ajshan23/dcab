import{r as t,M as j,j as e,V as u}from"./index-CpoNZy_K.js";import{B as y,S as v,D as N}from"./DataTable-Dd0ah6Zu.js";import{l as b,u as D}from"./index-U2oPHaYB.js";import{u as w}from"./useThemeClass-BqZMVik2.js";import{u as S}from"./useQuery-CdU9hP8Y.js";import{d as A}from"./productAssignmentService-rhs2HyLo.js";import"./Alert-DmmJ-CO8.js";import"./index-DnNRFRxm.js";import"./Button-5FPMlk4P.js";import"./Upload-BWEhbG-n.js";import"./index-DcKY4__E.js";import"./Drawer-YiESGu5W.js";import"./index-2_f4dh3X.js";import{I as i}from"./hoist-non-react-statics.cjs-CSsTDRi9.js";import"./index-UDOHiYwi.js";import"./ScrollBar-Bxslmpi8.js";import"./Views-Dk2fMzxD.js";import"./index-1G6_mNEt.js";import"./CloseButton-CrGnf40L.js";import"./_getPrototype-DwJTGY_5.js";import"./toString-BjSMy3v_.js";const J=()=>{const x=t.useRef(null),{textTheme:n}=w(),{productId:r}=j(),[l,p]=t.useState(""),[a,d]=t.useState({}),{data:o,isLoading:g,error:c}=S({queryKey:["product-assignment-history",r,l,a],queryFn:()=>A({productId:r,status:l,fromDate:a.start,toDate:a.end})}),h=t.useMemo(()=>[{header:"Product",accessorKey:"product",cell:s=>e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:s.row.original.product.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:["SN: ",s.row.original.product.serialNumber]})]})},{header:"Employee",accessorKey:"employee",cell:s=>e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:s.row.original.employee.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",s.row.original.employee.empId]})]})},{header:"Dates",cell:s=>e.jsxs("div",{children:[e.jsxs("div",{children:["Assigned: ",u(s.row.original.assignedDate).format("DD/MM/YYYY")]}),s.row.original.returnedDate&&e.jsxs("div",{children:["Returned: ",u(s.row.original.returnedDate).format("DD/MM/YYYY")]})]})},{header:"Status",accessorKey:"status",cell:s=>{const m=s.row.original.status,f={assigned:"bg-blue-500",returned:"bg-emerald-500",lost:"bg-red-500",damaged:"bg-amber-500"};return e.jsx(y,{className:f[m],children:m})}},{header:"Condition",accessorKey:"condition",cell:s=>s.row.original.condition||"-"},{header:"Actions",id:"action",cell:s=>e.jsx("span",{className:`cursor-pointer p-2 hover:${n}`,onClick:()=>{},children:e.jsx(b,{className:"text-xl"})})}],[n]);return c?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("span",{className:"text-red-500",children:["Error: ",c.message]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[e.jsx("h3",{children:r?"Product Assignment History":"All Assignments History"}),e.jsxs("div",{className:"flex-1 flex flex-col md:flex-row gap-2",children:[e.jsx(i,{placeholder:"Search...",prefix:e.jsx(D,{className:"text-lg"}),className:"max-w-md"}),e.jsx(v,{placeholder:"Filter by Status",options:[{value:"",label:"All Statuses"},{value:"assigned",label:"Assigned"},{value:"returned",label:"Returned"},{value:"lost",label:"Lost"},{value:"damaged",label:"Damaged"}],value:l,onChange:s=>p(s),className:"min-w-[150px]"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{type:"date",placeholder:"From Date",value:a.start,onChange:s=>d({...a,start:s.target.value})}),e.jsx(i,{type:"date",placeholder:"To Date",value:a.end,onChange:s=>d({...a,end:s.target.value})})]})]})]}),e.jsx(N,{ref:x,columns:h,data:(o==null?void 0:o.data)||[],loading:g})]})};export{J as default};
