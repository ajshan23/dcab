import{J as j,r as a,Q as y,j as e,a1 as p}from"./index-cOqvBBIr.js";import{D as v}from"./DataTable-CPwywcbC.js";import{s as D,B as N}from"./proxy-CuIDo5Hh.js";import{u as b}from"./useThemeClass-CybD-6cM.js";import{u as w}from"./useQuery-DfbZlmc7.js";import{B as S}from"./Card-DIGZvD7G.js";import"./Alert-CTDsJo34.js";import"./index-C8lJW4Vi.js";import"./Button-DwOByDJ2.js";import"./Upload-DsbizeeT.js";import"./index-CBL9JDNu.js";import"./Drawer-u9YseTV0.js";import"./index-BmFHComS.js";import{I as n}from"./hoist-non-react-statics.cjs-B9oDFgJF.js";import"./index-Dgezmd6G.js";import{S as A}from"./index-CN4Vsls-.js";import"./Progress-CRnRERH5.js";import"./ScrollBar-CJQ4FW-3.js";import"./toString-R3Kz-oVC.js";import"./Views-CoZ6zsbe.js";import"./CloseButton-DwYxsUt0.js";import"./_getPrototype-DsJNHg3O.js";import"./index-Chjiymov.js";const Y=async r=>j.fetchData({url:"/product-assignments/list",method:"get",params:r}),X=()=>{const r=a.useRef(null),{textTheme:c}=b(),{productId:l}=y(),[o,x]=a.useState(""),[t,d]=a.useState({}),{data:i,isLoading:g,error:m}=w({queryKey:["product-assignment-history",l,o,t],queryFn:()=>Y({productId:l,status:o,fromDate:t.start,toDate:t.end})}),h=a.useMemo(()=>[{header:"Product",accessorKey:"product",cell:s=>e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:s.row.original.product.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:["SN: ",s.row.original.product.serialNumber]})]})},{header:"Employee",accessorKey:"employee",cell:s=>e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:s.row.original.employee.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",s.row.original.employee.empId]})]})},{header:"Dates",cell:s=>e.jsxs("div",{children:[e.jsxs("div",{children:["Assigned: ",p(s.row.original.assignedDate).format("DD/MM/YYYY")]}),s.row.original.returnedDate&&e.jsxs("div",{children:["Returned: ",p(s.row.original.returnedDate).format("DD/MM/YYYY")]})]})},{header:"Status",accessorKey:"status",cell:s=>{const u=s.row.original.status,f={assigned:"bg-blue-500",returned:"bg-emerald-500",lost:"bg-red-500",damaged:"bg-amber-500"};return e.jsx(S,{className:f[u],children:u})}},{header:"Condition",accessorKey:"condition",cell:s=>s.row.original.condition||"-"},{header:"Actions",id:"action",cell:s=>e.jsx("span",{className:`cursor-pointer p-2 hover:${c}`,onClick:()=>{},children:e.jsx(D,{className:"text-xl"})})}],[c]);return m?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("span",{className:"text-red-500",children:["Error: ",m.message]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[e.jsx("h3",{children:l?"Product Assignment History":"All Assignments History"}),e.jsxs("div",{className:"flex-1 flex flex-col md:flex-row gap-2",children:[e.jsx(n,{placeholder:"Search...",prefix:e.jsx(N,{className:"text-lg"}),className:"max-w-md"}),e.jsx(A,{placeholder:"Filter by Status",options:[{value:"",label:"All Statuses"},{value:"assigned",label:"Assigned"},{value:"returned",label:"Returned"},{value:"lost",label:"Lost"},{value:"damaged",label:"Damaged"}],value:o,onChange:s=>x(s),className:"min-w-[150px]"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{type:"date",placeholder:"From Date",value:t.start,onChange:s=>d({...t,start:s.target.value})}),e.jsx(n,{type:"date",placeholder:"To Date",value:t.end,onChange:s=>d({...t,end:s.target.value})})]})]})]}),e.jsx(v,{ref:r,columns:h,data:(i==null?void 0:i.data)||[],loading:g})]})};export{X as default};
