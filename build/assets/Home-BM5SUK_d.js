import{r as v,h as W,j as s,J as Y,K as I,u as L}from"./index-BTvfn8c6.js";import{C as P,B as X}from"./Badge-BvMIftRM.js";import{P as _}from"./Progress-DNVzeDE3.js";import{a as O,b as z,c as J,d as V,A as q,C as A}from"./chart.config-DAFIsZQa.js";import{B}from"./Button-ZOmEEmWf.js";import{C as H}from"./ClipLoader-DMEpPbxs.js";import"./index-Chjiymov.js";const C=["line","bar","area"],Q=e=>{const{series:n=[],width:t="100%",height:r=300,xAxis:a,customOptions:c,type:o="line",direction:i,donutTitle:m,donutText:d,className:b,...g}=e,l=v.useRef(null),y=v.useMemo(()=>{switch(o){case"line":return O;case"bar":return V;case"area":return J;case"donut":return z;default:return O}},[o]);let h=JSON.parse(JSON.stringify(y));const x=window.innerWidth<768,u=v.useCallback(()=>{if(l.current){const f=l.current.querySelectorAll("div.apexcharts-legend")[0];i===W&&(f.style.right="auto",f.style.left="0"),x&&(f.style.position="relative",f.style.top="0",f.style.justifyContent="start",f.style.padding="0")}},[i,x]);return v.useEffect(()=>{C.includes(o)&&u()},[o,u]),C.includes(o)&&(h.xaxis.categories=a),c&&(h={...h,...c}),o==="donut"&&(m&&(h.plotOptions.pie.donut.labels.total.label=m),d&&(h.plotOptions.pie.donut.labels.total.formatter=()=>d)),s.jsx("div",{ref:l,style:i===W?{direction:"ltr"}:{},className:"chartRef",children:s.jsx(q,{options:h,type:o,series:n,width:t,height:r,className:b,...g})})},D=43200,F=1440,T=Symbol.for("constructDateFrom");function S(e,n){return typeof e=="function"?e(n):e&&typeof e=="object"&&T in e?e[T](n):e instanceof Date?new e.constructor(n):new Date(n)}function w(e,n){return S(e,e)}let U={};function K(){return U}function E(e){const n=w(e),t=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return t.setUTCFullYear(n.getFullYear()),+e-+t}function k(e,...n){const t=S.bind(null,n.find(r=>typeof r=="object"));return n.map(t)}function j(e,n){const t=+w(e)-+w(n);return t<0?-1:t>0?1:t}function G(e){return S(e,Date.now())}function $(e,n,t){const[r,a]=k(t==null?void 0:t.in,e,n),c=r.getFullYear()-a.getFullYear(),o=r.getMonth()-a.getMonth();return c*12+o}function Z(e){return n=>{const t=Math.trunc,r=t(n);return r===0?0:r}}function ee(e,n){return+w(e)-+w(n)}function te(e,n){const t=w(e);return t.setHours(23,59,59,999),t}function ne(e,n){const t=w(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function ae(e,n){const t=w(e);return+te(t)==+ne(t)}function re(e,n,t){const[r,a,c]=k(t==null?void 0:t.in,e,e,n),o=j(a,c),i=Math.abs($(a,c));if(i<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-o*i);let m=j(a,c)===-o;ae(r)&&i===1&&j(r,c)===1&&(m=!1);const d=o*(i-+m);return d===0?0:d}function se(e,n,t){const r=ee(e,n)/1e3;return Z()(r)}const oe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ie=(e,n,t)=>{let r;const a=oe[e];return typeof a=="string"?r=a:n===1?r=a.one:r=a.other.replace("{{count}}",n.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function N(e){return(n={})=>{const t=n.width?String(n.width):e.defaultWidth;return e.formats[t]||e.formats[e.defaultWidth]}}const ce={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},le={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},de={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ue={date:N({formats:ce,defaultWidth:"full"}),time:N({formats:le,defaultWidth:"full"}),dateTime:N({formats:de,defaultWidth:"full"})},me={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},he=(e,n,t,r)=>me[e];function p(e){return(n,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,i=t!=null&&t.width?String(t.width):o;a=e.formattingValues[i]||e.formattingValues[o]}else{const o=e.defaultWidth,i=t!=null&&t.width?String(t.width):e.defaultWidth;a=e.values[i]||e.values[o]}const c=e.argumentCallback?e.argumentCallback(n):n;return a[c]}}const fe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ge={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ye={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},be={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},xe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ve={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},we=(e,n)=>{const t=Number(e),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},pe={ordinalNumber:we,era:p({values:fe,defaultWidth:"wide"}),quarter:p({values:ge,defaultWidth:"wide",argumentCallback:e=>e-1}),month:p({values:ye,defaultWidth:"wide"}),day:p({values:be,defaultWidth:"wide"}),dayPeriod:p({values:xe,defaultWidth:"wide",formattingValues:ve,defaultFormattingWidth:"wide"})};function M(e){return(n,t={})=>{const r=t.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],c=n.match(a);if(!c)return null;const o=c[0],i=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],m=Array.isArray(i)?De(i,g=>g.test(o)):Me(i,g=>g.test(o));let d;d=e.valueCallback?e.valueCallback(m):m,d=t.valueCallback?t.valueCallback(d):d;const b=n.slice(o.length);return{value:d,rest:b}}}function Me(e,n){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&n(e[t]))return t}function De(e,n){for(let t=0;t<e.length;t++)if(n(e[t]))return t}function je(e){return(n,t={})=>{const r=n.match(e.matchPattern);if(!r)return null;const a=r[0],c=n.match(e.parsePattern);if(!c)return null;let o=e.valueCallback?e.valueCallback(c[0]):c[0];o=t.valueCallback?t.valueCallback(o):o;const i=n.slice(a.length);return{value:o,rest:i}}}const Pe=/^(\d+)(th|st|nd|rd)?/i,Ne=/\d+/i,Se={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ke={any:[/^b/i,/^(a|c)/i]},We={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Oe={any:[/1/i,/2/i,/3/i,/4/i]},Ae={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Ce={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Fe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Te={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ee={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Re={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Ye={ordinalNumber:je({matchPattern:Pe,parsePattern:Ne,valueCallback:e=>parseInt(e,10)}),era:M({matchPatterns:Se,defaultMatchWidth:"wide",parsePatterns:ke,defaultParseWidth:"any"}),quarter:M({matchPatterns:We,defaultMatchWidth:"wide",parsePatterns:Oe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:M({matchPatterns:Ae,defaultMatchWidth:"wide",parsePatterns:Ce,defaultParseWidth:"any"}),day:M({matchPatterns:Fe,defaultMatchWidth:"wide",parsePatterns:Te,defaultParseWidth:"any"}),dayPeriod:M({matchPatterns:Ee,defaultMatchWidth:"any",parsePatterns:Re,defaultParseWidth:"any"})},Ie={code:"en-US",formatDistance:ie,formatLong:ue,formatRelative:he,localize:pe,match:Ye,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Le(e,n,t){const a=K().locale??Ie,c=2520,o=j(e,n);if(isNaN(o))throw new RangeError("Invalid time value");const i=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:o}),[m,d]=k(t==null?void 0:t.in,...o>0?[n,e]:[e,n]),b=se(d,m),g=(E(d)-E(m))/1e3,l=Math.round((b-g)/60);let y;if(l<2)return l===0?a.formatDistance("lessThanXMinutes",1,i):a.formatDistance("xMinutes",l,i);if(l<45)return a.formatDistance("xMinutes",l,i);if(l<90)return a.formatDistance("aboutXHours",1,i);if(l<F){const h=Math.round(l/60);return a.formatDistance("aboutXHours",h,i)}else{if(l<c)return a.formatDistance("xDays",1,i);if(l<D){const h=Math.round(l/F);return a.formatDistance("xDays",h,i)}else if(l<D*2)return y=Math.round(l/D),a.formatDistance("aboutXMonths",y,i)}if(y=re(d,m),y<12){const h=Math.round(l/D);return a.formatDistance("xMonths",h,i)}else{const h=y%12,x=Math.trunc(y/12);return h<3?a.formatDistance("aboutXYears",x,i):h<9?a.formatDistance("overXYears",x,i):a.formatDistance("almostXYears",x+1,i)}}function Xe(e,n){return Le(e,G(e),n)}const _e=async()=>{var e,n,t,r;try{const a=await Y.fetchData({url:"/dashboard/products",method:"get"});if(!((e=a.data)!=null&&e.success)||!a.data.data)throw new Error(((n=a.data)==null?void 0:n.message)||"Invalid dashboard data format");const c=a.data.data,o=c.recentActivity||[],i=c.recentAssignments||[],m=c.categoryStats||[],d=c.productOverview.weeklyTrend.series||[],b=c.productOverview.weeklyTrend.categories||[];return{...c,productOverview:{...c.productOverview,weeklyTrend:{series:d,categories:b}},recentActivity:o.map(g=>({...g,timestamp:Xe(new Date(g.timestamp))+" ago"})),recentAssignments:i,categoryStats:m}}catch(a){throw console.error("DashboardService Error:",a),new Error(((r=(t=a.response)==null?void 0:t.data)==null?void 0:r.message)||a.message||"Failed to fetch dashboard data")}},Ue=()=>{const e=I(),n=L(u=>{var f;return((f=u.auth.user)==null?void 0:f.username)||"Admin"}),[t,r]=v.useState(null),[a,c]=v.useState(!0),[o,i]=v.useState(null);if(v.useEffect(()=>{(async()=>{try{c(!0);const f=await _e();r(f)}catch(f){const R=(f==null?void 0:f.message)||"Failed to load dashboard data";i(R),console.error("Dashboard Error:",f)}finally{c(!1)}})()},[]),a)return s.jsx("div",{className:"flex justify-center items-center h-full",children:s.jsx(H,{color:"#3b82f6",size:50,speedMultiplier:.8})});if(o||!t)return s.jsx("div",{className:"flex justify-center items-center h-full",children:s.jsx("p",{className:"text-red-500",children:o||"Failed to load dashboard data"})});const{productCount:m=0,productOverview:d={assigned:0,available:0,total:0,weeklyTrend:{series:[],categories:[]}},recentAssignments:b=[],categoryStats:g=[]}=t,{assigned:l=0,available:y=0,total:h=0,weeklyTrend:x={series:[],categories:[]}}=d;return s.jsxs("div",{className:"flex flex-col gap-4 h-full p-4",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm",children:[s.jsxs("h2",{className:"text-2xl font-bold mb-1",children:["Welcome back, ",n,"!"]}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:["You're managing ",m," products in the system"]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[s.jsxs(P,{className:"lg:col-span-2",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Product Overview"}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold ",children:l}),s.jsx("div",{className:"text-sm text-gray-500",children:"Assigned"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold",children:y}),s.jsx("div",{className:"text-sm text-gray-500",children:"Available"})]})]})]}),s.jsx(Q,{series:x.series,xAxis:x.categories,height:300,type:"bar",customOptions:{colors:[A[0],A[2]],legend:{show:!0,position:"top"}}})]}),s.jsxs(P,{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Inventory by Category"}),s.jsx("div",{className:"space-y-4",children:g.map(u=>s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between mb-1",children:[s.jsx("span",{className:"font-medium",children:u.name}),s.jsxs("span",{className:"text-sm",children:[u.assigned,"/",u.total," assigned"]})]}),s.jsx(_,{percent:Math.round(u.assigned/u.total*100),className:"h-2",color:"blue-500"})]},u.name))})]})]}),s.jsxs(P,{children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Recent Assignments"}),s.jsx(B,{size:"xs",onClick:()=>e("/assignments"),children:"View All"})]}),s.jsx("div",{className:"space-y-3",children:b.map(u=>s.jsxs("div",{className:"flex items-center justify-between p-3 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:u.name}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Assigned to ",u.assignedTo]})]}),s.jsx(X,{className:u.status==="assigned"?"bg-blue-500 text-white":"bg-green-500 text-white",children:u.status})]},u.id))})]})]})};export{Ue as default};
