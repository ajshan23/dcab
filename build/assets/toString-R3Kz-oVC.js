import{r as s,j as y,t as D}from"./index-cOqvBBIr.js";import{M as G,J as N,P as K,K as O,L as B}from"./proxy-CuIDo5Hh.js";import{r as F,a as U,d as H,e as J}from"./Views-CoZ6zsbe.js";class V extends s.Component{getSnapshotBeforeUpdate(i){const t=this.props.childRef.current;if(t&&i.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function W({children:n,isPresent:i}){const t=s.useId(),r=s.useRef(null),o=s.useRef({width:0,height:0,top:0,left:0}),{nonce:a}=s.useContext(G);return s.useInsertionEffect(()=>{const{width:c,height:e,top:f,left:h}=o.current;if(i||!r.current||!c||!e)return;r.current.dataset.motionPopId=t;const d=document.createElement("style");return a&&(d.nonce=a),document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${e}px !important;
            top: ${f}px !important;
            left: ${h}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[i]),y.jsx(V,{isPresent:i,childRef:r,sizeRef:o,children:s.cloneElement(n,{ref:r})})}const Q=({children:n,initial:i,isPresent:t,onExitComplete:r,custom:o,presenceAffectsLayout:a,mode:c})=>{const e=N(X),f=s.useId(),h=s.useCallback(l=>{e.set(l,!0);for(const C of e.values())if(!C)return;r&&r()},[e,r]),d=s.useMemo(()=>({id:f,initial:i,isPresent:t,custom:o,onExitComplete:h,register:l=>(e.set(l,!1),()=>e.delete(l))}),a?[Math.random(),h]:[t,h]);return s.useMemo(()=>{e.forEach((l,C)=>e.set(C,!1))},[t]),s.useEffect(()=>{!t&&!e.size&&r&&r()},[t]),c==="popLayout"&&(n=y.jsx(W,{isPresent:t,children:n})),y.jsx(K.Provider,{value:d,children:n})};function X(){return new Map}const x=n=>n.key||"";function _(n){const i=[];return s.Children.forEach(n,t=>{s.isValidElement(t)&&i.push(t)}),i}const oe=({children:n,exitBeforeEnter:i,custom:t,initial:r=!0,onExitComplete:o,presenceAffectsLayout:a=!0,mode:c="sync"})=>{const e=s.useMemo(()=>_(n),[n]),f=e.map(x),h=s.useRef(!0),d=s.useRef(e),l=N(()=>new Map),[C,A]=s.useState(e),[m,I]=s.useState(e);O(()=>{h.current=!1,d.current=e;for(let p=0;p<m.length;p++){const u=x(m[p]);f.includes(u)?l.delete(u):l.get(u)!==!0&&l.set(u,!1)}},[m,f.length,f.join("-")]);const b=[];if(e!==C){let p=[...e];for(let u=0;u<m.length;u++){const g=m[u],v=x(g);f.includes(v)||(p.splice(u,0,g),b.push(g))}c==="wait"&&b.length&&(p=b),I(_(p)),A(e);return}const{forceRender:S}=s.useContext(B);return y.jsx(y.Fragment,{children:m.map(p=>{const u=x(p),g=e===m||f.includes(u),v=()=>{if(l.has(u))l.set(u,!0);else return;let T=!0;l.forEach($=>{$||(T=!1)}),T&&(S==null||S(),I(d.current),o&&o())};return y.jsx(Q,{isPresent:g,initial:!h.current||r?void 0:!1,custom:g?void 0:t,presenceAffectsLayout:a,mode:c,onExitComplete:g?void 0:v,children:p},u)})})};var R,w;function Y(){if(w)return R;w=1;function n(i){return i==null}return R=n,R}var Z=Y();const ue=D(Z);var E,P;function ee(){if(P)return E;P=1;function n(i,t){for(var r=-1,o=i==null?0:i.length,a=Array(o);++r<o;)a[r]=t(i[r],r,i);return a}return E=n,E}var M,k;function te(){if(k)return M;k=1;var n=F(),i=U(),t="[object Symbol]";function r(o){return typeof o=="symbol"||i(o)&&n(o)==t}return M=r,M}var q,L;function re(){if(L)return q;L=1;var n=H(),i=ee(),t=J(),r=te(),o=n?n.prototype:void 0,a=o?o.toString:void 0;function c(e){if(typeof e=="string")return e;if(t(e))return i(e,c)+"";if(r(e))return a?a.call(e):"";var f=e+"";return f=="0"&&1/e==-1/0?"-0":f}return q=c,q}var j,z;function ae(){if(z)return j;z=1;var n=re();function i(t){return t==null?"":n(t)}return j=i,j}export{oe as A,ae as a,ue as i,te as r};
